{% extends 'homepage/base.html' %} {% load static %} {% block title %}Busca de
Not√≠cias | InfoTrack{% endblock %} {% block content %}


<!-- busca -->

<section class="banner-home fade-in">
  <div class="container texto-banner">
    <form method="get" action="{% url 'filtragem' %}" class="form-busca">
      <div class="inputs-busca">
        <input
          type="search"
          name="pesquisa"
          placeholder="Buscar palavra-chave..."
        />
      </div>
      <button type="submit" class="botao-buscar">
        <i class="fa-solid fa-magnifying-glass"></i> Buscar Not√≠cias
      </button>
    </form>
  </div>
</section>


<!-- ===== RESULTADOS ===== -->
<section class="destaques fade-in">
  <div class="container">
    <div
      id="loading"
      style="display: none; text-align: center; margin-top: 20px"
    >
      <i class="fa fa-spinner fa-spin"></i> Buscando not√≠cias...
    </div>
    {% if page_obj.object_list %}
    <h2>Foram encontradas {{ total_noticias }} not√≠cias</h2>
    <div class="cards-destaque">
      {% for n in page_obj %}
      <article class="card">
        {% if n.urlToImage %}
        <img src="{{ n.urlToImage }}" alt="Imagem da not√≠cia" />
        {% else %}
        <img
          src="{% static 'homepage/img/noticia1.webp' %}"
          alt="Imagem padr√£o"
        />
        {% endif %}
        <h3>{{ n.title|truncatechars:120 }}</h3>
        <p style="padding: 0 15px; font-size: 0.9rem; color: #555">
          {{ n.description|default:"Sem descri√ß√£o dispon√≠vel."|truncatechars:150
          }}
        </p>
        <p style="padding: 0 15px; font-size: 0.8rem; color: #999">
          <small
            ><strong>{{ n.source.name }}</strong> ‚Äî {{ n.publishedAt|date:"d/m/Y
            H:i" }}</small
          >
        </p>
        <a href="{{ n.url }}" target="_blank">Ler mais</a>
      </article>
      {% endfor %}
    </div>

    <!-- PAGINA√á√ÉO -->
    <div class="paginacao" style="text-align: center; margin-top: 40px">
      {% if page_obj.has_previous %}
      <a
        href="?page={{ page_obj.previous_page_number }}&categoria={{ categoria }}&pesquisa={{ pesquisa }}&data={{ data_noticia }}"
        class="botao-buscar"
        style="padding: 8px 18px"
        >‚Üê Anterior</a
      >
      {% endif %}

      <span style="margin: 0 10px"
        >P√°gina {{ page_obj.number }} de {{ page_obj.paginator.num_pages
        }}</span
      >

      {% if page_obj.has_next %}
      <a
        href="?page={{ page_obj.next_page_number }}&categoria={{ categoria }}&pesquisa={{ pesquisa }}&data={{ data_noticia }}"
        class="botao-buscar"
        style="padding: 8px 18px"
        >Pr√≥xima ‚Üí</a
      >
      {% endif %}
    </div>

    {% else %}
    <p
      style="
        text-align: center;
        font-size: 1.2rem;
        color: #666;
        margin-top: 50px;
      "
    >
      Nenhuma not√≠cia encontrada. Tente mudar os filtros ou buscar outro termo
      üîç
    </p>
    {% endif %}
  </div>
</section>


{% endblock %}
